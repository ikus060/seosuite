{% extends "common.html" %}
{% block title %}Home{% endblock %}
{% block content %}
    <h2>Analysis Data</h2>
    <div class="pull-right"><a href="/delete?run_id={{ run_id }}" class="btn btn-danger">Delete</a></div>
    <div class="table-responsive">
        <table class="table table-striped table-condensed ">
            <thead>
                <th>URL</th>
                <th><span data-toggle="tooltip" title="Informational issues">I</span></th>
                <th><span data-toggle="tooltip" title="Warning issues">W</span></th>
                <th><span data-toggle="tooltip" title="Error issues">E</span></th>
                <th><span data-toggle="tooltip" title="Critical issues">C</span></th>
                <th>Title</th>
                <th>Heading</th>
                <th>Meta Description</th>
                <th>Meta Keywords</th>
                <th><span data-toggle="tooltip" title="Page Authority">PA</span></th>
            </thead>

            <tbody>
            {% for url in crawl_urls %}
            <tr>
                <td>
                    <a href="/url?url_id={{ url.id }}" data-toggle="tooltip" title="{{url.domain}}{{ url.path }}">
                        {{url.domain}}{{ url.path | truncate(50, True) }}
                    </a>
                </td>
                <td>{% if url.lint_info %}<span class="label label-success">{{ url.lint_info }}</span>{% endif %}</td>
                <td>{% if url.lint_warn %}<span class="label label-info">{{ url.lint_warn }}</span>{% endif %}</td>
                <td>{% if url.lint_error %}<span class="label label-warning">{{ url.lint_error }}</span>{% endif %}</td>
                <td>{% if url.lint_critical %}<span class="label label-danger">{{ url.lint_critical }}</span>{% endif %}</td>
                <td>{{ url.title_1 }}</td>
                <td>{{ url.h1_1 }}</td>
                <td>{{ url.meta_description_1 }}</td>
                <td>
                   {% for k in url.keywords %}
                   {% if 'meta.description' in k[1] %}{{ k[0]Â }}, {% endif %}
                   {% endfor %}
                </td>
                <td>{{ "{0:0.1f}".format(url.moz_upa) }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <nav aria-label="Page navigation" class="text-center">
      <ul class="pagination">
        <li class="{% if not prev_page %}disabled{% endif %}">
          <a href="/?run_id={{ run_id }}&page={{ prev_page }}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        {% for i in range(1, count_page) %}
        <li class="{% if page == i %}active{% endif %}">
            <a href="/?run_id={{ run_id }}&page={{ i }}">{{ i }}</a>
        </li>
        {% endfor %}
        <li class="{% if not next_page %}disabled{% endif %}">
          <a href="/?run_id={{ run_id }}&page={{ next_page }}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
{% endblock %}
